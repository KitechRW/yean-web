(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5794],{97530:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var r=n(87536),a=n(2482),s=function(e,t,n){return void 0===t&&(t={abortEarly:!1}),void 0===n&&(n={}),function(s,i,l){try{var o=function(){var e,t;return u.error?{values:{},errors:(0,a.D)((e=u.error,t=!l.shouldUseNativeValidation&&"all"===l.criteriaMode,e.details.length?e.details.reduce(function(e,n){var a=n.path.join(".");if(e[a]||(e[a]={message:n.message,type:n.type}),t){var s=e[a].types,i=s&&s[n.type];e[a]=(0,r.KN)(a,t,e,n.type,i?[].concat(i,n.message):n.message)}return e},{}):{}),l)}:(l.shouldUseNativeValidation&&(0,a.M)({},l),{errors:{},values:u.value})},d=Object.assign({},t,{context:i}),u={},c=function(){if("sync"===n.mode)u=e.validate(s,d);else{var t=function(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}(function(){return Promise.resolve(e.validateAsync(s,d)).then(function(e){u.value=e})},function(e){u.error=e});if(t&&t.then)return t.then(function(){})}}();return Promise.resolve(c&&c.then?c.then(o):o())}catch($){return Promise.reject($)}}}},96540:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var a=r(n(64938)),s=n(85893),i=(0,a.default)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=i},77957:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var a=r(n(64938)),s=n(85893),i=(0,a.default)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=i},85377:function(e,t,n){"use strict";n.d(t,{Nv:function(){return f},TB:function(){return $}});var r=n(50029),a=n(87794),s=n.n(a),i=n(10637);n(9669);var l,o,d=n(8100),u=(l=(0,r.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.Z.OpenRoute.getRoute(t));case 1:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)}),c=(o=(0,r.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.Z.GetRoute.getRoute(t));case 1:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),$=function(e){var t=(0,d.ZP)(e,u),n=t.data,r=t.error;return{data:(null==n?void 0:n.data)||{},isLoading:!r&&!n,isError:r}},f=function(e){var t=(0,d.ZP)(e,c),n=t.data,r=t.error;return{data:(null==n?void 0:n.data)||{},isLoading:!r&&!n,isError:r}}},66673:function(e,t,n){"use strict";var r=n(77533),a=n(50594);n(67294);var s=n(85893),i=function(e){var t=e.children,n=e.toggle,i=void 0!==n&&n,l=e.setToggle,o=e.title,d=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&l(e)}},u=function(e){"Escape"===e.key&&l(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{role:"button",onClick:function(){return l(!i)},tabIndex:0,children:t[0]}),(0,s.jsx)(r.ZP,{anchor:"top",open:i,onClose:d(!1),sx:{"& .MuiPaper-elevation":{maxWidth:"100%",minHeight:"100vh",marginX:"auto",padding:"8px",backgroundColor:"transparent",boxShadow:"none",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"center",height:"fit-content"}},children:(0,s.jsxs)("div",{className:"max-w-4xl pointer-events-auto bg-white flex py-3 px-4 md:p-8 flex-col items-center w-full",children:[(0,s.jsxs)("div",{className:"flex gap-x-2 justify-between w-full",children:[(0,s.jsx)("h1",{className:"font-black text-xl tracking-wide text-brand-green",children:void 0===o?"New item":o}),(0,s.jsxs)("button",{type:"button",onKeyDown:u,onClick:d(!1),className:"text-brand-green flex flex-col items-center ml-auto",children:[(0,s.jsx)(a.Z,{fontSize:"large"}),(0,s.jsx)("span",{className:"text-sm text-brand-green",children:"ESC"})]})]}),(0,s.jsx)("div",{className:"flex flex-col w-full",children:t[1]})]})})]})};t.Z=i},95071:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return O},default:function(){return V}});var r=n(67294),a=n(9008),s=n.n(a),i=n(43389),l=n(77957),o=n(96540),d=n(16835),u=n(85377),c=n(59499),$=n(50029),f=n(87794),h=n.n(f),x=n(10637),p=n(46737),g=n.n(p),m=n(42705),v=n.n(m),b=n(66673),_=n(87536),y=n(97530),w=n(77035),j=n(17737),N=n(85893);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=v().object({slideIds:v().array().items(v().number()).min(6).max(6).required()}),S=function(e){var t,n,a,s=e.handleEdit,i=e.dataValues,l=e.handleDelete,o=e.children,c=r.useState(!1),f=(0,d.Z)(c,2),p=f[0],m=f[1],v=r.useState(!1),k=(0,d.Z)(v,2),S=k[0],D=k[1],P=(0,_.cI)({resolver:(0,y.L)(E)}),I=P.register,O=P.handleSubmit,V=P.setValue,C=P.reset,L=P.formState.errors,M=(n=(0,$.Z)(h().mark(function e(t){var n,r,a,l;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),n=(null==i?void 0:i.id)||1,e.next=4,x.Z.PatchRoute.patchRoute("/api/landing/".concat(n),{slideIds:t.slideIds});case 4:a=(r=e.sent).data,l=r.error,m(!1),a&&g()("Edited!",a.message||"Edited successfully","success").then(function(){C(),D(!1),s(a.data)}),l&&g()("Ooops!",l.message||"Something went wrong");case 10:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),R=(a=(0,$.Z)(h().mark(function e(){var t,n,r,a;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({title:"Are you sure?",text:"Are you sure that you want to delete this page?",icon:"warning",dangerMode:!0});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return m(!0),e.next=8,x.Z.DeleteRoute.deleteRoute("/api/landing/1");case 8:r=(n=e.sent).data,a=n.error,m(!1),r&&g()("Deleted!",r.message||"Deleted successfully","success").then(function(){C(),D(!1),l(i.id)}),a&&g()("Ooops!",a.message||"Something went wrong");case 14:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)});r.useEffect(function(){i&&C({slideIds:i.slideIds})},[i]);var T=(0,u.Nv)("/api/articles?limit=200").data.data,A=null==T?void 0:T.map(function(e){return{value:e.id,label:e.title}}),z=null==A?void 0:A.filter(function(e){var t;return null===(t=i.slideIds)||void 0===t?void 0:t.includes(e.value)});return(0,N.jsxs)(b.Z,{title:"Edit Home page",toggle:S,setToggle:D,children:[o,(0,N.jsx)("div",{className:"flex flex-col",children:(0,N.jsxs)("form",{onSubmit:function(e){O(M)(e)},className:"gap-y-3 flex flex-col",children:[(0,N.jsxs)("label",{className:"flex flex-col",children:[(0,N.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Home Slides"}),(0,N.jsx)(j.ZP,Z(Z({isMulti:!0},I("slideIds")),{},{defaultValue:z,options:A,onChange:function(e){V("slideIds",e.map(function(e){return Number(e.value)}),{shouldDirty:!0,shouldValidate:!0})},className:"mt-2"})),(null===(t=L.slideIds)||void 0===t?void 0:t.message)&&(0,N.jsx)("p",{className:"mt-1 text-red-500",children:(0,w.a)("".concat(L.slideIds.message))})]}),(0,N.jsxs)("div",{className:"flex items-center space-x-3 justify-between md:col-span-2",children:[(0,N.jsx)("button",{type:"button",disabled:p,onClick:R,className:"font-semibold disabled:cursor-not-allowed disabled:bg-slate-400 mt-12 text-white bg-red-500/80 hover:bg-red-500 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg text-sm w-full sm:w-auto px-8 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:red:ring-blue-800",children:"Delete"}),(0,N.jsx)("button",{type:"submit",disabled:p,className:"font-semibold disabled:cursor-not-allowed disabled:bg-slate-400 mt-12 text-white bg-brand-green/80 hover:bg-brand-green focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-sm w-full sm:w-auto px-12 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Save"})]})]})})]})},D=n(93946),P=function(e){var t=e.data,n=e.handleEdit,r=e.handleDelete;return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{className:"flex flex-col bg-white rounded-lg border border-gray-200 shadow-md dark:bg-gray-800 dark:border-gray-700",children:(0,N.jsxs)("div",{className:"p-12 flex-grow flex flex-col items-center justify-between gap-y-2",children:[(0,N.jsx)("p",{className:"font-semibold pl-2",children:"Slides"}),(0,N.jsx)(S,{dataValues:t,handleEdit:n,handleDelete:r,children:(0,N.jsx)(D.Z,{children:(0,N.jsx)(l.Z,{})})})]})})})},I=function(){var e=r.useState({}),t=(0,d.Z)(e,2),n=t[0],a=t[1],s=(0,u.TB)("/api/landing/1"),i=s.data.data,c=s.isLoading,$=function(e){a(e)},f=function(e){a({})};return(r.useEffect(function(){a(i)},[i]),c)?(0,N.jsx)("p",{children:"Loading..."}):(0,N.jsxs)("div",{className:"px-4 md:pl-6 bg-white py-4 flex flex-col flex-grow items-center md:px-8 w-full",children:[(0,N.jsx)("div",{className:"space-x-6 md:space-x-12 bg-white flex justify-between w-full",children:n?(0,N.jsx)(S,{handleDelete:f,handleEdit:$,dataValues:n||{},children:(0,N.jsxs)("button",{className:"hover:bg-brand-green group flex items-center rounded-md bg-brand-green/80 text-brand-yellow text-sm font-medium px-8 py-2 shadow-sm",children:[(0,N.jsx)(l.Z,{}),(0,N.jsx)("span",{children:"Edit"})]})}):(0,N.jsx)(S,{handleDelete:f,handleEdit:$,dataValues:n||{},children:(0,N.jsxs)("button",{className:"hover:bg-brand-green group flex items-center rounded-md bg-brand-green/80 text-white text-sm font-medium px-8 py-2 shadow-sm",children:[(0,N.jsx)(o.Z,{}),(0,N.jsx)("span",{children:"New"})]})})}),n?(0,N.jsx)(P,{data:n,handleEdit:$,handleDelete:f},null==n?void 0:n.id):null]})},O=!0,V=function(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(s(),{children:(0,N.jsx)("title",{children:"Yean"})}),(0,N.jsx)(i.Z,{children:(0,N.jsx)(I,{})})]})}},77035:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var r=function(e){if(e){var t=e.replace(/"/g,"").replace(/Id/g,"");return t.charAt(0).toUpperCase()+t.slice(1)}}},98014:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/home",function(){return n(95071)}])}},function(e){e.O(0,[8247,8795,3946,8100,2482,9601,6737,2705,7737,3389,9774,2888,179],function(){return e(e.s=98014)}),_N_E=e.O()}]);