(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9635],{41733:function(e,t,r){"use strict";var n=r(95318);t.Z=void 0;var a=n(r(64938)),s=r(85893),l=(0,a.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=l},61659:function(e,t,r){"use strict";var n=r(95318);t.Z=void 0;var a=n(r(64938)),s=r(85893),l=(0,a.default)((0,s.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore");t.Z=l},37958:function(e,t,r){"use strict";var n=r(95318);t.Z=void 0;var a=n(r(64938)),s=r(85893),l=(0,a.default)((0,s.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");t.Z=l},85377:function(e,t,r){"use strict";r.d(t,{Nv:function(){return p},TB:function(){return $}});var n=r(50029),a=r(87794),s=r.n(a),l=r(10637);r(9669);var o,i,u=r(8100),d=(o=(0,n.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.Z.OpenRoute.getRoute(t));case 1:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),c=(i=(0,n.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.Z.GetRoute.getRoute(t));case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),$=function(e){var t=(0,u.ZP)(e,d),r=t.data,n=t.error;return{data:(null==r?void 0:r.data)||{},isLoading:!n&&!r,isError:n}},p=function(e){var t=(0,u.ZP)(e,c),r=t.data,n=t.error;return{data:(null==r?void 0:r.data)||{},isLoading:!n&&!r,isError:n}}},22862:function(e,t,r){"use strict";var n=r(61659),a=r(37958),s=r(85893),l=function(e){var t=e.currentPage,r=void 0===t?1:t,l=e.pageCount,o=void 0===l?1:l,i=e.setPageNumber,u=e.showNumbers,d=function(){i(r+1)},c=function(e){i(e)},$=function(){i(r-1)};return o<=1?null:(0,s.jsxs)("div",{className:"cursor-pointer flex",children:[(0,s.jsxs)("button",{disabled:r<=1,onClick:$,className:"disabled:cursor-not-allowed disabled:opacity-50 flex items-center space-x-1 py-2 px-3 text-gray-500 bg-white rounded-l border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[(0,s.jsx)(n.Z,{}),(0,s.jsx)("span",{children:"Previous"})]}),(void 0===u||u)&&Array(o||1).fill(0).map(function(e,t){return(0,s.jsx)("button",{onClick:function(){c(t+1)},className:"flex flex-col justify-center items-center ".concat(t+1===r?"py-2 px-3 text-blue-600 bg-blue-50 border border-gray-300 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white":"py-2 px-3 text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"),children:(0,s.jsx)("span",{children:t+1})},t+"paginationKey")}),(0,s.jsxs)("button",{disabled:r>=o,onClick:d,className:"disabled:cursor-not-allowed disabled:opacity-50 flex items-center py-2 px-3 text-gray-500 bg-white rounded-r border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[(0,s.jsx)("span",{children:"Next"})," ",(0,s.jsx)(a.Z,{})]})]})};t.Z=l},99383:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return y},default:function(){return j}});var n=r(9008),a=r.n(n),s=r(43389),l=r(67294),o=r(85377),i=r(22862),u=r(42705),d=r.n(u),c=r(59499),$=r(41733),p=r(17737),x=r(10637),h=r(46737),f=r.n(h),g=r(85893);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var b=function(e){var t=e.key,r=e.data,n=(0,l.useState)(null),a=n[0],s=n[1],o=(0,l.useState)(null),i=o[0],u=o[1],d=(0,l.useState)(r),h=d[0],b=d[1],m=(0,l.useState)(!1),_=m[0],y=m[1],j=function(e,t){x.Z.PatchRoute.patchRoute("/api/users/"+(null==h?void 0:h.id),(0,c.Z)({},e,t)).then(function(e){f()("Updated!",e.data.message||"Updated successfully","success").then(function(){var t;b(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},null===(t=e.data)||void 0===t?void 0:t.data)),y(!1)})})},N=function(){f()({title:"Are you sure?",text:"Are you sure that you want to delete this user?",icon:"warning",dangerMode:!0}).then(function(e){e&&x.Z.DeleteRoute.deleteRoute("/api/users/"+(null==h?void 0:h.id)).then(function(e){f()("Deleted!",e.data.message||"Delete successfully","success").then(function(){b(null)})})})};return((0,l.useEffect)(function(){null!=h&&h.type&&(s({label:null==h?void 0:h.type,value:null==h?void 0:h.type}),u({label:null==h?void 0:h.type,value:null==h?void 0:h.type}))},[h]),(0,l.useEffect)(function(){(null==a?void 0:a.value)!==(null==i?void 0:i.value)&&y(!0)},[a,i]),h)?(0,g.jsxs)("tr",{className:"border-b hover:bg-orange-100 bg-gray-100",children:[(0,g.jsx)("td",{className:"p-3 px-5",children:(0,g.jsx)("label",{className:"bg-transparent",children:(null==h?void 0:h.firstname)+" "+(null==h?void 0:h.lastname)})}),(0,g.jsx)("td",{className:"p-3 px-5",children:(0,g.jsx)("label",{className:"bg-transparent",children:null==h?void 0:h.phone})}),(0,g.jsx)("td",{className:"p-3 px-5",children:(0,g.jsx)("label",{className:"bg-transparent",children:null==h?void 0:h.email})}),(0,g.jsx)("td",{className:"p-3 px-5",children:(0,g.jsx)(p.ZP,{className:"bg-transparent min-w-max",isMulti:!1,options:[{label:"admin",value:"admin"},{label:"member",value:"member"}],value:a,onChange:function(e){_?(null==i?void 0:i.value)===(null==e?void 0:e.value)&&y(!1):u(a),s(e)}})}),(0,g.jsx)("td",{className:"p-3 px-5 flex justify-end",children:_?(0,g.jsx)("button",{onClick:function(){j("type",a.value)},type:"button",className:"mr-3 text-sm bg-brand-green hover:bg-brand-green/80 text-white py-3 px-5 rounded focus:outline-none focus:shadow-outline",children:"Save"}):(0,g.jsxs)("div",{children:[null!=h&&h.active?(0,g.jsx)("button",{onClick:function(){j("active",!1)},type:"button",className:"mr-3 text-sm bg-orange-600 hover:bg-orange-900 text-white py-2 px-3 rounded focus:outline-none focus:shadow-outline",children:"Refuse"}):(0,g.jsx)("button",{onClick:function(){j("active",!0)},type:"button",className:"mr-3 text-sm bg-emerald-700 hover:bg-emerald-900 text-white py-2 px-3 rounded focus:outline-none focus:shadow-outline",children:"Approve"}),(0,g.jsx)("button",{onClick:function(){N()},type:"button",className:"text-sm hover:bg-gray-100 text-black py-2 px-3 rounded focus:outline-none focus:shadow-outline",children:(0,g.jsx)($.Z,{})})]})})]},t):null},m=r(11163);d().object({staff_type:d().string()});var _=function(e){var t=e.page,r=l.useRef(null),n=(0,m.useRouter)(),a=(0,o.TB)("/api/users?attributes=id,type,email,firstname,lastname,phone,active&page=".concat(t||1,"&limit=20")),s=a.data,u=s.data,d=s.pagination;return a.isLoading,(0,l.useEffect)(function(){},[u]),(0,g.jsx)("div",{ref:r,children:(0,g.jsxs)("div",{className:"pb-14",children:[(0,g.jsxs)("div",{className:"p-4 flex justify-around ",children:[(0,g.jsx)("h1",{className:"text-3xl self-center",children:"Users"}),(0,g.jsxs)("div",{className:"flex flex-col p-3 px-8 justify-center min-w-[255px] min-h-[145px] drop-shadow rounded-lg bg-white",children:[(0,g.jsx)("h2",{className:"text-base font-semibold",children:"Users"}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 mt-3",children:[(0,g.jsx)("p",{className:"bg-[#E6F3FF] p-2 px-3 rounded text-dark-green font-bold",children:null==d?void 0:d.count}),(0,g.jsx)("p",{className:"text-[#AAB1B7]",children:"Registered"})]})]})]}),(0,g.jsx)("div",{className:"px-3 py-4 flex justify-center overflow-x-auto ",children:(0,g.jsx)("table",{className:"w-full text-md bg-white shadow-md rounded mb-4",children:(0,g.jsxs)("tbody",{children:[(0,g.jsxs)("tr",{className:"border-b",children:[(0,g.jsx)("th",{className:"text-left p-3 px-5",children:"Names"}),(0,g.jsx)("th",{className:"text-left p-3 px-5",children:"Phone"}),(0,g.jsx)("th",{className:"text-left p-3 px-5",children:"Email"}),(0,g.jsx)("th",{className:"text-left p-3 px-5",children:"Type"}),(0,g.jsx)("th",{})]}),null==u?void 0:u.map(function(e){return(0,g.jsx)(b,{data:e},e.id+"unique@22!")})]})})}),(0,g.jsx)("div",{className:"flex justify-end mr-10",children:(0,g.jsx)(i.Z,{showNumbers:!1,pageCount:null==d?void 0:d.pageCount,currentPage:null==d?void 0:d.currentPage,setPageNumber:function(e){n.push("/admin/users?page="+e)}})})]})})},y=!0,j=function(e){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a(),{children:(0,g.jsx)("title",{children:"Yean"})}),(0,g.jsx)(s.Z,{children:(0,g.jsx)(_,{page:e.page})})]})}},64168:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return r(99383)}])}},function(e){e.O(0,[8247,8795,8100,9601,6737,2705,7737,3389,9774,2888,179],function(){return e(e.s=64168)}),_N_E=e.O()}]);