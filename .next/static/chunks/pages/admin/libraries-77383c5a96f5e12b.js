(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9385],{97530:function(e,r,t){"use strict";t.d(r,{L:function(){return s}});var n=t(87536),a=t(2482),s=function(e,r,t){return void 0===r&&(r={abortEarly:!1}),void 0===t&&(t={}),function(s,o,l){try{var i=function(){var e,r;return u.error?{values:{},errors:(0,a.D)((e=u.error,r=!l.shouldUseNativeValidation&&"all"===l.criteriaMode,e.details.length?e.details.reduce(function(e,t){var a=t.path.join(".");if(e[a]||(e[a]={message:t.message,type:t.type}),r){var s=e[a].types,o=s&&s[t.type];e[a]=(0,n.KN)(a,r,e,t.type,o?[].concat(o,t.message):t.message)}return e},{}):{}),l)}:(l.shouldUseNativeValidation&&(0,a.M)({},l),{errors:{},values:u.value})},c=Object.assign({},r,{context:o}),u={},d=function(){if("sync"===t.mode)u=e.validate(s,c);else{var r=function(e,r){try{var t=e()}catch(n){return r(n)}return t&&t.then?t.then(void 0,r):t}(function(){return Promise.resolve(e.validateAsync(s,c)).then(function(e){u.value=e})},function(e){u.error=e});if(r&&r.then)return r.then(function(){})}}();return Promise.resolve(d&&d.then?d.then(i):i())}catch($){return Promise.reject($)}}}},96540:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var a=n(t(64938)),s=t(85893),o=(0,a.default)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");r.Z=o},54970:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var a=n(t(64938)),s=t(85893),o=(0,a.default)((0,s.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");r.Z=o},41733:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var a=n(t(64938)),s=t(85893),o=(0,a.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");r.Z=o},77957:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var a=n(t(64938)),s=t(85893),o=(0,a.default)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");r.Z=o},61659:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var a=n(t(64938)),s=t(85893),o=(0,a.default)((0,s.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore");r.Z=o},37958:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var a=n(t(64938)),s=t(85893),o=(0,a.default)((0,s.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");r.Z=o},62665:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var a=n(t(64938)),s=t(85893),o=(0,a.default)((0,s.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"}),"PictureAsPdf");r.Z=o},85377:function(e,r,t){"use strict";t.d(r,{Nv:function(){return f},TB:function(){return $}});var n=t(50029),a=t(87794),s=t.n(a),o=t(10637);t(9669);var l,i,c=t(8100),u=(l=(0,n.Z)(s().mark(function e(r){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.OpenRoute.getRoute(r));case 1:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)}),d=(i=(0,n.Z)(s().mark(function e(r){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.GetRoute.getRoute(r));case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),$=function(e){var r=(0,c.ZP)(e,u),t=r.data,n=r.error;return{data:(null==t?void 0:t.data)||{},isLoading:!n&&!t,isError:n}},f=function(e){var r=(0,c.ZP)(e,d),t=r.data,n=r.error;return{data:(null==t?void 0:t.data)||{},isLoading:!n&&!t,isError:n}}},50401:function(e,r,t){"use strict";var n=t(16835),a=t(67294),s=t(91070),o=t(85893);s.v0.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(s.v0.version,"/pdf.worker.js");var l={cMapUrl:"cmaps/",cMapPacked:!0,standardFontDataUrl:"standard_fonts/"},i=function(e){var r=e.src,t=a.useState(r),i=(0,n.Z)(t,2),c=i[0],u=i[1],d=a.useState(0),$=(0,n.Z)(d,2),f=$[0],g=$[1];return(a.useEffect(function(){!r||r.startsWith("/uploads/")||r.startsWith("http")||u("/uploads/".concat(r))},[r]),c)?(0,o.jsx)("div",{className:"PDF__container__document",children:(0,o.jsx)(s.BB,{file:c,onLoadSuccess:function(e){g(e.numPages)},options:l,children:Array.from(Array(f),function(e,r){return(0,o.jsx)(s.T3,{pageNumber:r+1},"page_".concat(r+1))})})}):null};r.Z=i},99843:function(e,r,t){"use strict";var n=t(16835),a=t(66673),s=t(67294),o=t(50401),l=t(85893),i=function(e){var r=e.children,t=e.src,i=e.title,c=s.useState(!1),u=(0,n.Z)(c,2),d=u[0],$=u[1];return(0,l.jsxs)(a.Z,{toggle:d,setToggle:$,title:i,children:[r,(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)(o.Z,{src:t})})]})};r.Z=i},22862:function(e,r,t){"use strict";var n=t(61659),a=t(37958),s=t(85893),o=function(e){var r=e.currentPage,t=void 0===r?1:r,o=e.pageCount,l=void 0===o?1:o,i=e.setPageNumber,c=e.showNumbers,u=function(){i(t+1)},d=function(e){i(e)},$=function(){i(t-1)};return l<=1?null:(0,s.jsxs)("div",{className:"cursor-pointer flex",children:[(0,s.jsxs)("button",{disabled:t<=1,onClick:$,className:"disabled:cursor-not-allowed disabled:opacity-50 flex items-center space-x-1 py-2 px-3 text-gray-500 bg-white rounded-l border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[(0,s.jsx)(n.Z,{}),(0,s.jsx)("span",{children:"Previous"})]}),(void 0===c||c)&&Array(l||1).fill(0).map(function(e,r){return(0,s.jsx)("button",{onClick:function(){d(r+1)},className:"flex flex-col justify-center items-center ".concat(r+1===t?"py-2 px-3 text-blue-600 bg-blue-50 border border-gray-300 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white":"py-2 px-3 text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"),children:(0,s.jsx)("span",{children:r+1})},r+"paginationKey")}),(0,s.jsxs)("button",{disabled:t>=l,onClick:u,className:"disabled:cursor-not-allowed disabled:opacity-50 flex items-center py-2 px-3 text-gray-500 bg-white rounded-r border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[(0,s.jsx)("span",{children:"Next"})," ",(0,s.jsx)(a.Z,{})]})]})};r.Z=o},66673:function(e,r,t){"use strict";var n=t(77533),a=t(50594);t(67294);var s=t(85893),o=function(e){var r=e.children,t=e.toggle,o=void 0!==t&&t,l=e.setToggle,i=e.title,c=function(e){return function(r){("keydown"!==r.type||"Tab"!==r.key&&"Shift"!==r.key)&&l(e)}},u=function(e){"Escape"===e.key&&l(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{role:"button",onClick:function(){return l(!o)},tabIndex:0,children:r[0]}),(0,s.jsx)(n.ZP,{anchor:"top",open:o,onClose:c(!1),sx:{"& .MuiPaper-elevation":{maxWidth:"100%",minHeight:"100vh",marginX:"auto",padding:"8px",backgroundColor:"transparent",boxShadow:"none",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"center",height:"fit-content"}},children:(0,s.jsxs)("div",{className:"max-w-4xl pointer-events-auto bg-white flex py-3 px-4 md:p-8 flex-col items-center w-full",children:[(0,s.jsxs)("div",{className:"flex gap-x-2 justify-between w-full",children:[(0,s.jsx)("h1",{className:"font-black text-xl tracking-wide text-brand-green",children:void 0===i?"New item":i}),(0,s.jsxs)("button",{type:"button",onKeyDown:u,onClick:c(!1),className:"text-brand-green flex flex-col items-center ml-auto",children:[(0,s.jsx)(a.Z,{fontSize:"large"}),(0,s.jsx)("span",{className:"text-sm text-brand-green",children:"ESC"})]})]}),(0,s.jsx)("div",{className:"flex flex-col w-full",children:r[1]})]})})]})};r.Z=o},29473:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return G},default:function(){return Y}});var n=t(67294),a=t(9008),s=t.n(a),o=t(43389),l=t(96540),i=t(42761),c=t(27812),u=t(59499),d=t(16835),$=t(85377),f=t(22862),g=t(50029),p=t(87794),x=t.n(p),h=t(10637),m=t(46737),v=t.n(m),b=t(42705),_=t.n(b),y=t(66673),w=t(87536),j=t(97530),k=t(41733),N=t(54970),Z=t(99843),P=t(85893);function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?D(Object(t),!0).forEach(function(r){(0,u.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function O(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var E=function(e){var r=e.updateFilesCb,t=e.maxFileSizeInBytes,a=void 0===t?5e7:t,s=e.multiple,o=n.useState(!1),l=(0,d.Z)(o,2),i=l[0],c=l[1],u=n.useState({}),$=(0,d.Z)(u,2),f=$[0],g=$[1],p=n.useRef(null),x=function(e){e.length;var r,t=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return O(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return O(e,r)}}(e))){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw s}}}}(e);try{for(t.s();!(r=t.n()).done;){var n=r.value;n.size<a&&(f[n.name]=n)}}catch(s){t.e(s)}finally{t.f()}return S({},f)},h=function(e){var t,n;r(Object.keys(t=e).map(function(e){return t[e]}))},m=function(e){var r=e.target.files;if(r.length){var t=x(r);g(t),h(t)}},v=function(e){e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)},b=function(e){e.preventDefault(),e.stopPropagation();var r=e.dataTransfer.files;if(console.log(e),r&&r.length){var t=x(r);g(t),h(t)}},_=function(e){delete f[e],g(S({},f)),h(S({},f))};return(0,P.jsxs)("div",{onDragOver:v,onDrop:b,onDragEnter:v,onDragLeave:v,className:"flex flex-col w-full",children:[(0,P.jsxs)("label",{className:"cursor-pointer flex items-center space-x-3 w-full border-2 border-dashed border-gray-600 rounded-lg px-4 py-6 md:py-10 ".concat(i?"border-brand-green":"peer-active:border-brand-green"),children:[(0,P.jsx)(N.Z,{className:"text-brand-green",fontSize:"large"}),(0,P.jsx)("p",{className:"flex flex-col",children:"Drag & Drop PDFs here or click to select file(s)"}),(0,P.jsx)("input",{ref:p,type:"file",multiple:void 0!==s&&s,accept:"application/pdf",onChange:m,className:"hidden"})]}),(0,P.jsx)("div",{className:"mt-1 inline-grid md:grid-cols-2 gap-3 w-full",children:Object.keys(f).map(function(e,r){var t,n=f[e],a="application"===n.type.split("/")[0];return(0,P.jsx)("div",{className:"flex flex-col",children:a&&(0,P.jsx)(Z.Z,{src:URL.createObjectURL(n),title:e,children:(0,P.jsxs)("div",{className:"py-1 bg-cyan-200/50 px-3 rounded-lg flex items-center w-full space-x-2 justify-between",children:[(0,P.jsxs)("p",{className:"text-xs text-cyan-500",children:[e," ",(0,P.jsxs)("span",{className:"text-red-500 pl-3",children:[Math.round((t=n.size)/1e3)," kb"]})]}),(0,P.jsx)(k.Z,{className:"text-brand-red cursor-pointer text-red-500",onClick:function(){return _(e)}})]})})},e)})})]})},C=t(77035),z=t(17737);function V(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function M(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?V(Object(t),!0).forEach(function(r){(0,u.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var L=_().object({name:_().string().required(),link:_().object().required(),size:_().number().required(),cat:_().number().required()}),H=function(e){var r,t,a,s,o,l,i=e.handleAdd,c=e.children,u=n.useState(!1),f=(0,d.Z)(u,2),p=f[0],m=f[1],b=n.useState(!1),_=(0,d.Z)(b,2),k=_[0],N=_[1],Z=(0,$.Nv)("/api/categories").data.data,D=(0,w.cI)({resolver:(0,j.L)(L)}),S=D.register,O=D.handleSubmit,V=D.setValue,H=(D.getValues,D.reset),A=D.formState.errors,F=(l=(0,g.Z)(x().mark(function e(r){var t,n,a,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t=new FormData,Object.keys(r).forEach(function(e){t.append("link"===e?"media":e,r[e])}),e.next=5,h.Z.PostRoute.postRoute("/api/libraries",t);case 5:a=(n=e.sent).data,s=n.error,m(!1),a&&v()("Added!",a.message||"Added successfully","success").then(function(){H(),N(!1),i(a.data)}),s&&v()("Ooops!",s.message||"Something went wrong");case 11:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)});console.log(A);var R=null==Z?void 0:null===(r=Z.rows)||void 0===r?void 0:r.map(function(e){return{value:e.id,label:e.name}});return(0,P.jsxs)(y.Z,{title:"New Book",toggle:k,setToggle:N,children:[c,(0,P.jsx)("div",{className:"flex flex-col",children:(0,P.jsxs)("form",{onSubmit:function(e){O(F)(e)},className:"gap-y-3 flex flex-col",children:[(0,P.jsxs)("label",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Name"}),(0,P.jsx)("input",M(M({type:"text",placeholder:"Name"},S("name")),{},{className:"mt-2 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"})),(null===(t=A.name)||void 0===t?void 0:t.message)&&(0,P.jsx)("p",{className:"mt-1 text-red-500",children:(0,C.a)("".concat(A.name.message))})]}),(0,P.jsxs)("label",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Category"}),(0,P.jsx)(z.ZP,M(M({isMulti:!1},S("cat")),{},{options:R,onChange:function(e){V("cat",e.value,{shouldDirty:!0,shouldValidate:!0})},className:"mt-2"})),(null===(a=A.cat)||void 0===a?void 0:a.message)&&(0,P.jsx)("p",{className:"mt-1 text-red-500",children:(0,C.a)("".concat(A.cat.message))})]}),(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:"text-sm mb-2 font-medium text-gray-900 dark:text-gray-300",children:"PDF"}),(0,P.jsx)(E,{updateFilesCb:function(e){var r;V("link",e[0],{shouldDirty:!0,shouldValidate:!0}),V("size",null===(r=e[0])||void 0===r?void 0:r.size,{shouldDirty:!0,shouldValidate:!0})},multiple:!1}),(null===(s=A.link)||void 0===s?void 0:s.message)&&(0,P.jsx)("p",{className:"mt-1 text-red-500",children:(0,C.a)("".concat(null===(o=A.link)||void 0===o?void 0:o.message))})]}),(0,P.jsx)("button",{type:"submit",disabled:p,className:"md:col-span-2 disabled:cursor-not-allowed disabled:bg-slate-400 mt-12 text-white bg-brand-green/80 hover:bg-brand-green focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-8 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Submit"})]})})]})},A=t(93946),F=t(77957),R=t(62665);function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach(function(r){(0,u.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var q=_().object({name:_().string().required(),link:_().object().required(),size:_().number().required(),cat:_().number().required()}),B=function(e){var r,t,a,s,o,l,i,c=e.handleEdit,u=e.dataValues,f=e.handleDelete,p=e.children,m=n.useState(!1),b=(0,d.Z)(m,2),_=b[0],k=b[1],N=n.useState(!1),Z=(0,d.Z)(N,2),D=Z[0],S=Z[1],O=(0,w.cI)({resolver:(0,j.L)(q)}),V=O.register,M=O.handleSubmit,L=O.setValue,H=O.reset,A=O.formState.errors,F=(l=(0,g.Z)(x().mark(function e(r){var t,n,a,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,Object.keys(r).forEach(function(e){t.append("link"===e?"media":e,r[e])}),k(!0),e.next=5,h.Z.PatchRoute.patchRoute("/api/libraries/".concat(u.id),t);case 5:a=(n=e.sent).data,s=n.error,k(!1),a&&v()("Edited!",a.message||"Edited successfully","success").then(function(){H(),S(!1),c(a.data)}),s&&v()("Ooops!",s.message||"Something went wrong");case 11:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)}),R=(i=(0,g.Z)(x().mark(function e(){var r,t,n,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({title:"Are you sure?",text:"Are you sure that you want to delete this book?",icon:"warning",dangerMode:!0});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:return k(!0),e.next=8,h.Z.DeleteRoute.deleteRoute("/api/libraries/".concat(u.id));case 8:n=(t=e.sent).data,a=t.error,k(!1),n&&v()("Deleted!",n.message||"Deleted successfully","success").then(function(){H(),S(!1),f(u.id)}),a&&v()("Ooops!",a.message||"Something went wrong");case 14:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)});n.useEffect(function(){u&&H({name:u.name,link:u.link,cat:u.cat})},[u]);var T=(0,$.Nv)("/api/categories").data.data,B=null==T?void 0:null===(r=T.rows)||void 0===r?void 0:r.map(function(e){return{value:e.id,label:e.name}}),U=null==B?void 0:B.filter(function(e){return e.value==u.cat});return(0,P.jsxs)(y.Z,{title:"Edit Category",toggle:D,setToggle:S,children:[p,(0,P.jsx)("div",{className:"flex flex-col",children:(0,P.jsxs)("form",{onSubmit:function(e){M(F)(e)},className:"gap-y-3 flex flex-col",children:[(0,P.jsxs)("label",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Name"}),(0,P.jsx)("input",I(I({type:"text",placeholder:"Name"},V("name")),{},{className:"mt-2 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"})),(null===(t=A.name)||void 0===t?void 0:t.message)&&(0,P.jsx)("p",{className:"mt-1 text-red-500",children:(0,C.a)("".concat(A.name.message))})]}),(0,P.jsxs)("label",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Category"}),(0,P.jsx)(z.ZP,I(I({isMulti:!1},V("cat")),{},{defaultValue:U,options:B,onChange:function(e){L("cat",e.value,{shouldDirty:!0,shouldValidate:!0})},className:"mt-2"})),(null===(a=A.cat)||void 0===a?void 0:a.message)&&(0,P.jsx)("p",{className:"mt-1 text-red-500",children:(0,C.a)("".concat(A.cat.message))})]}),(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:"text-sm mb-2 font-medium text-gray-900 dark:text-gray-300",children:"PDF"}),(0,P.jsx)(E,{updateFilesCb:function(e){var r;L("link",e[0],{shouldDirty:!0,shouldValidate:!0}),L("size",null===(r=e[0])||void 0===r?void 0:r.size,{shouldDirty:!0,shouldValidate:!0})},multiple:!1}),(null===(s=A.link)||void 0===s?void 0:s.message)&&(0,P.jsx)("p",{className:"mt-1 text-red-500",children:(0,C.a)("".concat(null===(o=A.link)||void 0===o?void 0:o.message))})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-3 justify-between md:col-span-2",children:[(0,P.jsx)("button",{type:"button",disabled:_,onClick:R,className:"font-semibold disabled:cursor-not-allowed disabled:bg-slate-400 mt-12 text-white bg-red-500/80 hover:bg-red-500 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg text-sm w-full sm:w-auto px-8 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:red:ring-blue-800",children:"Delete"}),(0,P.jsx)("button",{type:"submit",disabled:_,className:"font-semibold disabled:cursor-not-allowed disabled:bg-slate-400 mt-12 text-white bg-brand-green/80 hover:bg-brand-green focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-sm w-full sm:w-auto px-12 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Save"})]})]})})]})},U=function(e){var r=e.data,t=e.handleEdit,n=e.handleDelete,a=r||{},s=a.name,o=a.link;return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{className:"flex flex-col bg-white rounded-lg border border-gray-200 shadow-md dark:bg-gray-800 dark:border-gray-700",children:(0,P.jsxs)("div",{className:"p-3 flex-grow flex flex-col items-center justify-between gap-y-2",children:[(0,P.jsx)(Z.Z,{src:o,title:s,children:(0,P.jsx)(R.Z,{className:"text-red-500",fontSize:"large"})}),(0,P.jsx)("p",{className:"font-semibold pl-2 w-full text-center",children:s}),(0,P.jsx)(B,{dataValues:r,handleEdit:t,handleDelete:n,children:(0,P.jsx)(A.Z,{children:(0,P.jsx)(F.Z,{})})})]})})})};function W(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function K(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?W(Object(t),!0).forEach(function(r){(0,u.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var X=function(){var e=n.useRef(null),r=n.useState(1),t=(0,d.Z)(r,2),a=t[0],s=t[1],o=n.useState({count:0,rows:[]}),u=(0,d.Z)(o,2),g=u[0],p=u[1],x=(0,$.TB)("/api/libraries?page=".concat(a||1,"&limit=20")),h=x.data,m=h.data,v=h.pagination,b=x.isLoading,_=n.useState(""),y=(0,d.Z)(_,2),w=y[0],j=y[1];n.useEffect(function(){var e=(null==m?void 0:m.rows)||[];if(e.length){var r=e.filter(function(e){return e.name.toLowerCase().includes(w.toLowerCase())});p(function(e){return K(K({},e),{},{rows:r})})}},[m,w]),n.useEffect(function(){var e=(null==m?void 0:m.rows)||[];e.length&&p(function(r){return K(K({},r),{},{rows:e})})},[m]);var k=function(e){p(function(r){return K(K({},g),{},{rows:[e].concat((0,c.Z)(r.rows))})})},N=function(e){var r=g.rows.map(function(r){return Number(r.id)===Number(e.id)?e:r});p(function(e){return K(K({},e),{},{rows:r})})},Z=function(e){p(function(r){return K(K({},r),{},{rows:r.rows.filter(function(r){return r.id!==e})})})};return b?(0,P.jsx)("p",{children:"Loading..."}):(0,P.jsxs)("div",{ref:e,className:"px-4 md:pl-6 bg-white py-4 flex flex-col flex-grow items-center md:px-8 w-full",children:[(0,P.jsxs)("div",{className:"space-x-6 md:space-x-12 bg-white flex justify-between w-full",children:[(0,P.jsxs)("div",{className:"group flex-grow flex items-center relative",children:[(0,P.jsx)(i.Z,{className:"left-2 absolute text-slate-400"}),(0,P.jsx)("input",{value:w,onChange:function(e){return j(e.target.value)},className:"peer focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 pl-10 ring-1 ring-slate-200 shadow-sm",type:"text",placeholder:"Filter libraries..."})]}),(0,P.jsx)(H,{handleAdd:function(e){k(e)},children:(0,P.jsxs)("button",{className:"hover:bg-brand-green group flex items-center rounded-md bg-brand-green/80 text-white text-sm font-medium px-8 py-2 shadow-sm",children:[(0,P.jsx)(l.Z,{}),(0,P.jsx)("span",{children:"New"})]})})]}),(0,P.jsxs)("ul",{className:"w-full py-4 md:py-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 text-sm leading-6",children:[g.rows.map(function(e,r){return(0,P.jsx)(U,{data:e,handleEdit:N,handleDelete:Z},null==e?void 0:e.id)}),(0,P.jsx)(H,{handleAdd:function(e){k(e)},children:(0,P.jsx)("li",{className:"flex",children:(0,P.jsxs)("button",{className:"hover:border-blue-500 hover:border-solid hover:bg-white hover:text-blue-500 group w-full flex flex-col items-center justify-center rounded-md border-2 border-dashed border-slate-300 text-sm leading-6 text-slate-900 font-medium p-3",children:[(0,P.jsx)(l.Z,{className:"group-hover:text-blue-500 mb-1 text-slate-400"}),"New Book"]})})})]}),(0,P.jsx)(f.Z,{pageCount:null==v?void 0:v.pageCount,currentPage:null==v?void 0:v.currentPage,setPageNumber:function(r){s(r),e.current.scrollIntoView()}})]})},G=!0,Y=function(){return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s(),{children:(0,P.jsx)("title",{children:"Yean"})}),(0,P.jsx)(o.Z,{children:(0,P.jsx)(X,{})})]})}},77035:function(e,r,t){"use strict";t.d(r,{a:function(){return n}});var n=function(e){if(e){var r=e.replace(/"/g,"").replace(/Id/g,"");return r.charAt(0).toUpperCase()+r.slice(1)}}},8813:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/libraries",function(){return t(29473)}])},11333:function(){},52262:function(){},4727:function(){},75028:function(){},57840:function(){}},function(e){e.O(0,[4895,8247,8795,3946,8100,2482,9601,6737,2705,7737,5850,3389,9774,2888,179],function(){return e(e.s=8813)}),_N_E=e.O()}]);